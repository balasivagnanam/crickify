<!--
  Generated template for the PreviousMatchDetailsPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>

  <ion-navbar color="primary">
    <ion-title>Location</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding class="appBackground">
  <ion-card>
    <ion-card-header>
      Location
    </ion-card-header>
    <ion-card-content>
      <ion-list no-lines>

        <form [formGroup]="createLocationForm">

          <ion-item>
            <ion-label floating>Name</ion-label>
            <ion-input formControlName="name" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label floating>Contact</ion-label>
            <ion-input formControlName="contact" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label floating>Email</ion-label>
            <ion-input formControlName="email" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label floating>Address</ion-label>
            <ion-input formControlName="address" type="text"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label>Country</ion-label>
            <ion-select formControlName="country">
              <ion-option *ngFor="let key of locations" [value]="key.name">{{key.name}}</ion-option>
            </ion-select>
          </ion-item>
          <ion-item>
            <ion-label floating>Latitude</ion-label>
            <ion-input formControlName="lat" type="number" step="0.01"></ion-input>
          </ion-item>
          <ion-item>
            <ion-label floating>Longitude</ion-label>
            <ion-input formControlName="lng" type="number" step="0.01"></ion-input>
          </ion-item>
          <button ion-button color="secondary" icon-left clear small [disabled]="!createLocationForm.valid" (click)="createLocation()">
            Save Location

          </button>
        </form>

      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-card *ngIf="location?.id!=null">
    <ion-card-header>
      Sub Locations
    </ion-card-header>
    <ion-card-content>
      <ion-list no-lines>
        <ion-card *ngFor="let location of location?.subLocations" color="primary">
          <ion-card-header>
            {{location.name}}
          </ion-card-header>
          <ion-row no-padding>

            <div *ngIf="location?.user?.id== userDetails.user.id">
              <ion-col>
                <button ion-button color="secondary" icon-left clear small (click)="editLocation(location)">
                  <ion-icon name="create"></ion-icon>

                  Edit

                </button>

              </ion-col>


            </div>
            <div>
              <ion-col>
                <button ion-button color="secondary" icon-left clear small (click)="view(location)">
                  <ion-icon name="eye"></ion-icon>
                  View

                </button>
              </ion-col>
            </div>
          </ion-row>
  
        </ion-card>
      </ion-list>
    </ion-card-content>
  </ion-card>
  <ion-fab bottom right>
      <button ion-fab mini (click)="createSubLocation()">
        <ion-icon name="add"></ion-icon>
      </button>
    </ion-fab>
</ion-content>